<%- include("header") -%>
    <br>
    <div class="row">
        <div class="col-lg-12">
            <form method="POST" action='/submitXMLData'>  
                <div class="row">          
                    <div class="container-fluid">
                        <div class="row">
                            <button class="btn btn-secondary" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseSubframe" aria-expanded="false"
                                aria-controls="collapseSubframe">
                                Subframe Information
                            </button>
                        </div>
                    </div>
                    <div class="collapse" id="collapseSubframe">
                        <p class="lead_text">Fiducial Points Information to be used by Subframe</p>
                        <br>
                        <div class="row twopanel">
                            <div class="col-lg-4">
                                <div>
                                    <p class="lead_text">Fiducial 1 Information</p>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div>
                                    <p class="lead_text">Fiducial 2 Information</p>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div>
                                    <p class="lead_text">Fiducial 3 Information</p>
                                </div>
                            </div>
                        </div>
                        <div class="row twopanel">
                            <div class="col-lg-4">
                                <div class="card card-body">
                                    <div class="form-check">
                                        <label class="form-check-label" for="subframe_fid1_validity">Validity</label>
                                        <input type="checkbox" class="form-check-input" id="subframe_fid1_validity"
                                            name="subframe_fid1_validity"
                                            checked=<%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][0]['validity'][0]
                                            %> >
                                    </div>
                                    <div class="form-group">
                                        <label class="label-text" for="subframe_fid1_FiducialPositionSelect">Position of
                                            the
                                            Fiducial Point</label>
                                        <select class="form-control" id="subframe_fid1_FiducialPositionSelect"
                                            name="subframe_fid1_position_name">
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][0]['position_name'][0]=='top-left'
                                                ? 'selected' : '' %>>top-left</option>
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][0]['position_name'][0]=='top-right'
                                                ? 'selected' : '' %>>top-right</option>
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][0]['position_name'][0]=='bottom-left'
                                                ? 'selected' : '' %>>bottom-left</option>
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][0]['position_name'][0]=='bottom-right'
                                                ? 'selected' : '' %>>bottom-right</option>
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][0]['position_name'][0]=='top-center'
                                                ? 'selected' : '' %>>top-center</option>
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][0]['position_name'][0]=='bottom-center'
                                                ? 'selected' : '' %>>bottom-center</option>
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][0]['position_name'][0]=='left-center'
                                                ? 'selected' : '' %>>left-center</option>
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][0]['position_name'][0]=='right-center'
                                                ? 'selected' : '' %>>right-center</option>
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][0]['position_name'][0]=='center'
                                                ? 'selected' : '' %>>center</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label class="label-text">X Position of the Fiducial Point (in mm)</label>
                                        <input type="number" name="subframe_fid1_x_position" class="form-control"
                                            placeholder="values between 0 and 800 are accepted" min="0" max="800"
                                            value=<%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][0]['xposition'][0]%>
                                        >
                                    </div>
                                    <div class="form-group">
                                        <label class="label-text">Y Position of the Fiducial Point (in mm)</label>
                                        <input type="number" name="subframe_fid1_y_position" class="form-control"
                                            placeholder="values between 0 and 800 are accepted" min="0" max="800"
                                            value=<%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][0]['yposition'][0]%>
                                        >
                                    </div>
                                    <div class="form-group">
                                        <label class="label-text">Z Position of the Fiducial Point (in mm)</label>
                                        <input type="number" name="subframe_fid1_z_position" class="form-control"
                                            placeholder="values between 0 and 800 are accepted" min="0" max="800"
                                            value=<%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][0]['zposition'][0]%>
                                        >
                                    </div>
                                    <div class="form-group">
                                        <label class="label-text">Date</label>
                                        <input class="form-control" type="date" id="subframe_fid1_date"
                                            name="subframe_fid1_date" min="2012-01-01" max="2040-12-31"
                                            value=<%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][0]['entered_date'][0]
                                            %> >
                                    </div>
                                    <div class="form-group">
                                        <label class="label-text">Time</label>
                                        <input class="form-control" type="time" id="subframe_fid1_time"
                                            name="subframe_fid1_time"
                                            value=<%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][0]['entered_time'][0]
                                            %> >
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="card card-body">
                                    <div class="form-check">
                                        <label class="form-check-label" for="subframe_fid2_validity">Validity</label>
                                        <input type="checkbox" class="form-check-input" id="subframe_fid2_validity"
                                            name="subframe_fid2_validity"
                                            checked=<%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][1]['validity'][0]
                                            %> >
                                    </div>
                                    <div class="form-group">
                                        <label class="label-text" for="subframe_fid2_FiducialPositionSelect">Position of
                                            the
                                            Fiducial
                                            Point</label>
                                        <select class="form-control" id="subframe_fid2_FiducialPositionSelect"
                                            name="subframe_fid2_position_name">
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][1]['position_name'][0]=='top-left'
                                                ? 'selected' : '' %>>top-left</option>
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][1]['position_name'][0]=='top-right'
                                                ? 'selected' : '' %>>top-right</option>
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][1]['position_name'][0]=='bottom-left'
                                                ? 'selected' : '' %>>bottom-left</option>
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][1]['position_name'][0]=='bottom-right'
                                                ? 'selected' : '' %>>bottom-right</option>
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][1]['position_name'][0]=='top-center'
                                                ? 'selected' : '' %>>top-center</option>
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][1]['position_name'][0]=='bottom-center'
                                                ? 'selected' : '' %>>bottom-center</option>
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][1]['position_name'][0]=='left-center'
                                                ? 'selected' : '' %>>left-center</option>
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][1]['position_name'][0]=='right-center'
                                                ? 'selected' : '' %>>right-center</option>
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][1]['position_name'][0]=='center'
                                                ? 'selected' : '' %>>center</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label class="label-text">X Position of the Fiducial Point (in mm)</label>
                                        <input type="number" name="subframe_fid2_x_position" class="form-control"
                                            placeholder="values between 0 and 800 are accepted" min="0" max="800"
                                            value=<%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][1]['xposition'][0]%>
                                        >
                                    </div>
                                    <div class="form-group">
                                        <label class="label-text">Y Position of the Fiducial Point (in mm)</label>
                                        <input type="number" name="subframe_fid2_y_position" class="form-control"
                                            placeholder="values between 0 and 800 are accepted" min="0" max="800"
                                            value=<%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][1]['yposition'][0]%>
                                        >
                                    </div>
                                    <div class="form-group">
                                        <label class="label-text">Z Position of the Fiducial Point (in mm)</label>
                                        <input type="number" name="subframe_fid2_z_position" class="form-control"
                                            placeholder="values between 0 and 800 are accepted" min="0" max="800"
                                            value=<%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][1]['zposition'][0]%>
                                        >
                                    </div>
                                    <div class="form-group">
                                        <label class="label-text">Date</label>
                                        <input class="form-control" type="date" id="subframe_fid2_date"
                                            name="subframe_fid2_date" min="2012-01-01" max="2040-12-31"
                                            value=<%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][1]['entered_date'][0]
                                            %> >
                                    </div>
                                    <div class="form-group">
                                        <label class="label-text">Time</label>
                                        <input class="form-control" type="time" id="subframe_fid2_time"
                                            name="subframe_fid2_time"
                                            value=<%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][1]['entered_time'][0]
                                            %>>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="card card-body">
                                    <div class="form-check">
                                        <label class="form-check-label" for="subframe_fid3_validity">Validity</label>
                                        <input type="checkbox" class="form-check-input" id="subframe_fid3_validity"
                                            name="subframe_fid3_validity"
                                            checked=<%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][2]['validity'][0]
                                            %>>
                                    </div>
                                    <div class="form-group">
                                        <label class="label-text" for="subframe_fid3_FiducialPositionSelect">Position of
                                            the
                                            Fiducial
                                            Point</label>
                                        <select class="form-control" id="subframe_fid3_FiducialPositionSelect"
                                            name="subframe_fid3_position_name">
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][2]['position_name'][0]=='top-left'
                                                ? 'selected' : '' %>>top-left</option>
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][2]['position_name'][0]=='top-right'
                                                ? 'selected' : '' %>>top-right</option>
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][2]['position_name'][0]=='bottom-left'
                                                ? 'selected' : '' %>>bottom-left</option>
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][2]['position_name'][0]=='bottom-right'
                                                ? 'selected' : '' %>>bottom-right</option>
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][2]['position_name'][0]=='top-center'
                                                ? 'selected' : '' %>>top-center</option>
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][2]['position_name'][0]=='bottom-center'
                                                ? 'selected' : '' %>>bottom-center</option>
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][2]['position_name'][0]=='left-center'
                                                ? 'selected' : '' %>>left-center</option>
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][2]['position_name'][0]=='right-center'
                                                ? 'selected' : '' %>>right-center</option>
                                            <option
                                                <%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][2]['position_name'][0]=='center'
                                                ? 'selected' : '' %>>center</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label class="label-text">X Position of the Fiducial Point (in mm)</label>
                                        <input type="number" name="subframe_fid3_x_position" class="form-control"
                                            placeholder="values between 0 and 800 are accepted" min="0" max="800"
                                            value=<%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][2]['xposition'][0]%>
                                        >
                                    </div>
                                    <div class="form-group">
                                        <label class="label-text">Y Position of the Fiducial Point (in mm)</label>
                                        <input type="number" name="subframe_fid3_y_position" class="form-control"
                                            placeholder="values between 0 and 800 are accepted" min="0" max="800"
                                            value=<%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][2]['yposition'][0]%>
                                        >
                                    </div>
                                    <div class="form-group">
                                        <label class="label-text">Z Position of the Fiducial Point (in mm)</label>
                                        <input type="number" name="subframe_fid3_z_position" class="form-control"
                                            placeholder="values between 0 and 800 are accepted" min="0" max="800"
                                            value=<%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][2]['zposition'][0]%>
                                        >
                                    </div>
                                    <div class="form-group">
                                        <label class="label-text">Date</label>
                                        <input class="form-control" type="date" id="subframe_fid3_date"
                                            name="subframe_fid3_date" min="2012-01-01" max="2040-12-31"
                                            value=<%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][2]['entered_date'][0]
                                            %> >
                                    </div>
                                    <div class="form-group">
                                        <label class="label-text">Time</label>
                                        <input class="form-control" type="time" id="subframe_fid3_time"
                                            name="subframe_fid3_time"
                                            value=<%=xml_data['subframe_info'][0]['subframe_fiducials'][0]['fiducial'][2]['entered_time'][0]
                                            %> >
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr>
                        <p class="lead_text">Subframe Information</p>
                        <div class="row twopanel">
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="label-text">SubframeID</label>
                                    <input type="text" name="subframe_id" class="form-control"
                                        placeholder="14 Characters" minlength="14" maxlength="14"
                                        value=<%=xml_data['subframe_info'][0]['subframe_data'][0]['subframe_id'][0] %>
                                    disabled>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="label-text" for="group_select">Group</label>
                                    <select class="form-control" id="group_select" name="group_name">
                                        <option
                                            <%=xml_data['subframe_info'][0]['subframe_data'][0]['group_name'][0]=='SEC'
                                            ? 'selected' : '' %> >SEC</option>
                                        <option
                                            <%=xml_data['subframe_info'][0]['subframe_data'][0]['group_name'][0]=='HED'
                                            ? 'selected' : '' %> >HED</option>
                                        <option
                                            <%=xml_data['subframe_info'][0]['subframe_data'][0]['group_name'][0]=='MID'
                                            ? 'selected' : '' %> >MID</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row twopanel">
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="label-text">Date of the Experiment</label>
                                    <input class="form-control" type="date" id="subframe_experiment_date"
                                        name="subframe_experiment_date" min="2012-01-01" max="2040-12-31"
                                        value=<%=xml_data['subframe_info'][0]['subframe_data'][0]['entered_date'][0] %>
                                    >
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="label-text">Time of the Experiment</label>
                                    <input class="form-control" type="time" id="subframe_experiment_time"
                                        name="subframe_experiment_time"
                                        value=<%=xml_data['subframe_info'][0]['subframe_data'][0]['entered_time'][0] %>
                                    >
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="subframe_comments" class="label-text">Comments Related to the Subframe</label>
                            <textarea class="form-control" id="subframe_comments" name="subframe_comments" rows="2"
                                minlength="0" maxlength="100" placeholder="Maximum 100 characters are accepted"
                                value=<%=xml_data['subframe_info'][0]['subframe_data'][0]['comments'][0] %> ></textarea>
                        </div>
                        <div class="form-check">
                            <label class="form-check-label" for="subframe_validity">Validity</label>
                            <input type="checkbox" class="form-check-input" data-bs-toggle="collapse"
                                href="#validityCollapse" aria-expanded="false" id="subframe_validity"
                                name="subframe_validity"
                                checked=<%=xml_data['subframe_info'][0]['subframe_data'][0]['validity'][0] %>>
                        </div>
                        <div class="collapse" id="validityCollapse">
                            <div class="row twopanel">
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label class="label-text">Subframe Invalidity Date</label>
                                        <input class="form-control" type="date" id="subframe_invalid_date"
                                            name="subframe_invalid_date" min="2012-01-01" max="2040-12-31"
                                            value=<%=xml_data['subframe_info'][0]['subframe_data'][0]['invalid_since_date'][0]
                                            %> >
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label class="label-text">Subframe Invalidity Time</label>
                                        <input class="form-control" type="time" id="subframe_invalid_time"
                                            name="subframe_invalid_time"
                                            value=<%=xml_data['subframe_info'][0]['subframe_data'][0]['invalid_since_time'][0]
                                            %> >
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr>
                        <div class="row twopanel">
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="label-text" for="subframeDeviceSelect">Device</label>
                                    <select class="form-control" id="subframeDeviceSelect"
                                        name="subframe_device_select">
                                        <option
                                            <%=xml_data['subframe_info'][0]['subframe_event'][0]['device'][0]=='Keyence'
                                            ? 'selected' : '' %> >Keyence</option>
                                        <option
                                            <%=xml_data['subframe_info'][0]['subframe_event'][0]['device'][0]=='Nanofocus'
                                            ? 'selected' : '' %> >Nanofocus</option>
                                        <option
                                            <%=xml_data['subframe_info'][0]['subframe_event'][0]['device'][0]=='Quanta'
                                            ? 'selected' : '' %> >Quanta</option>
                                        <option
                                            <%=xml_data['subframe_info'][0]['subframe_event'][0]['device'][0]=='Zeiss'
                                            ? 'selected' : '' %> >Zeiss</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="label-text" for="subframeEventSelect">Subframe Event Type</label>
                                    <select class="form-control" id="subframeEventSelect" name="subframe_event_select">
                                        <option
                                            <%=xml_data['subframe_info'][0]['subframe_event'][0]['event_type'][0]=='XRay Measurement'
                                            ? 'selected' : '' %> >XRay Measurement</option>
                                        <option
                                            <%=xml_data['subframe_info'][0]['subframe_event'][0]['event_type'][0]=='XFEL Instrument Measurement'
                                            ? 'selected' : '' %> >XFEL Instrument Measurement</option>
                                        <option
                                            <%=xml_data['subframe_info'][0]['subframe_event'][0]['event_type'][0]=='Imaging'
                                            ? 'selected' : '' %> >Imaging</option>
                                        <option
                                            <%=xml_data['subframe_info'][0]['subframe_event'][0]['event_type'][0]=='High Resolution Imaging'
                                            ? 'selected' : '' %> >High Resolution Imaging</option>
                                        <option
                                            <%=xml_data['subframe_info'][0]['subframe_event'][0]['event_type'][0]=='Overview Imaging'
                                            ? 'selected' : '' %> >Overview Imaging</option>
                                        <option
                                            <%=xml_data['subframe_info'][0]['subframe_event'][0]['event_type'][0]=='Mounted'
                                            ? 'selected' : '' %> >Mounted</option>
                                        <option
                                            <%=xml_data['subframe_info'][0]['subframe_event'][0]['event_type'][0]=='Unmounted'
                                            ? 'selected' : '' %> >Unmounted</option>
                                        <option
                                            <%=xml_data['subframe_info'][0]['subframe_event'][0]['event_type'][0]=='Mounted Somewhere Else'
                                            ? 'selected' : '' %> >Mounted Somewhere Else</option>
                                        <option
                                            <%=xml_data['subframe_info'][0]['subframe_event'][0]['event_type'][0]=='Shot'
                                            ? 'selected' : '' %> >Shot</option>
                                        <option
                                            <%=xml_data['subframe_info'][0]['subframe_event'][0]['event_type'][0]=='Broken'
                                            ? 'selected' : '' %> >Broken</option>
                                        <option
                                            <%=xml_data['subframe_info'][0]['subframe_event'][0]['event_type'][0]=='Archived'
                                            ? 'selected' : '' %> >Archived</option>
                                        <option
                                            <%=xml_data['subframe_info'][0]['subframe_event'][0]['event_type'][0]=='Destroyed'
                                            ? 'selected' : '' %> >Destroyed</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row twopanel">
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="label-text">Data (e.g. Images)</label>
                                    <input class="form-control" type="text" id="subframe_link_to_data"
                                        name="subframe_link_to_data"
                                        value=<%=xml_data['subframe_info'][0]['subframe_event'][0]['loaded_data'][0] %>
                                    >
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="label-text">Meta Data (e.g. Text File)</label>
                                    <input class="form-control" type="text" id="subframe_link_to_meta_data"
                                        name="subframe_link_to_meta_data"
                                        value=<%=xml_data['subframe_info'][0]['subframe_event'][0]['text_data'][0] %> >
                                </div>
                            </div>
                        </div>
                        <div class="row twopanel">
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="label-text">Date of the Subframe Event</strong></label>
                                    <input class="form-control" type="date" id="subframe_event_experiment_date"
                                        name="subframe_event_experiment_date" min="2012-01-01" max="2040-12-31"
                                        value=<%=xml_data['subframe_info'][0]['subframe_event'][0]['event_date'][0] %> >
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="label-text">Time of the Subframe Event</strong></label>
                                    <input class="form-control" type="time" id="subframe_event_experiment_time"
                                        name="subframe_event_experiment_time"
                                        value=<%=xml_data['subframe_info'][0]['subframe_event'][0]['event_time'][0] %> >
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="subframe_events_comments" class="label-text">Comments Related to the Subframe
                                Event</label>
                            <textarea class="form-control" id="subframe_events_comments" name="subframe_events_comments"
                                rows="2" minlength="0" maxlength="100" placeholder="Maximum 100 characters are accepted"
                                value=<%=xml_data['subframe_info'][0]['subframe_event'][0]['comments'][0]
                                %> ></textarea>
                        </div>
                        <hr>

                        <div class="container-fluid">
                            <div class="row">
                                <button class="btn btn-secondary" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapseSubframeContent" aria-expanded="false"
                                    aria-controls="collapseSubframeContent">
                                    Subframe Content
                                </button>
                            </div>
                        </div>
                        <div class="collapse" id="collapseSubframeContent">
                        <% xml_data['roi'].forEach(function(roi){ %>
                            <div class="container-fluid">
                                <div class="row">
                                    <button class="btn btn-secondary" type="button" data-bs-toggle="collapse"
                                        data-bs-target="#<%= roi['name'][0] %>" aria-expanded="false"
                                        aria-controls="<%= roi['name'][0] %>">
                                        ROI (<%= roi['name'][0] %>)
                                    </button>
                                </div>
                            </div>
                            <div class="collapse" id="<%= roi['name'][0] %>">
                                <p class="lead_text">Fiducial Points Infromation used by Regions of Interest (ROI) for
                                    ROI
                                    Name = (<%= roi['name'][0] %>) </p>
                                <div class="row twopanel">
                                    <div class="col-lg-4">
                                        <div>
                                            <p class="lead_text">Fiducial 1 Information</p>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div>
                                            <p class="lead_text">Fiducial 2 Information</p>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div>
                                            <p class="lead_text">Fiducial 3 Information</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="row twopanel">
                                    <div class="col-lg-4">
                                        <div class="card card-body">
                                            <div class="form-check">
                                                <label class="form-check-label"
                                                    for="roi_event_fid1_validity">Validity</label>
                                                <input type="checkbox" class="form-check-input"
                                                    id="roi_event_fid1_validity" name="roi_event_fid1_validity"
                                                    checked=<%=roi['roi_fiducials'][0]['fiducial'][0]['validity'] %> >
                                            </div>
                                            <div class="form-group">
                                                <label class="label-text"
                                                    for="roi_event_fid1_FiducialPositionSelect">Position of
                                                    the Fiducial
                                                    Point</label>
                                                <select class="form-control" id="roi_event_fid1_FiducialPositionSelect"
                                                    name="roi_event_fid1_position_name">
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][0]['position_name']=='top-left'
                                                        ? 'selected' : '' %>>top-left</option>
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][0]['position_name']=='top-right'
                                                        ? 'selected' : '' %>>top-right</option>
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][0]['position_name']=='bottom-left'
                                                        ? 'selected' : '' %>>bottom-left</option>
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][0]['position_name']=='bottom-right'
                                                        ? 'selected' : '' %>>bottom-right</option>
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][0]['position_name']=='top-center'
                                                        ? 'selected' : '' %>>top-center</option>
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][0]['position_name']=='bottom-center'
                                                        ? 'selected' : '' %>>bottom-center</option>
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][0]['position_name']=='left-center'
                                                        ? 'selected' : '' %>>left-center</option>
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][0]['position_name']=='right-center'
                                                        ? 'selected' : '' %>>right-center</option>
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][0]['position_name']=='center'
                                                        ? 'selected' : '' %>>center</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label class="label-text">X Position of the Fiducial Point (in
                                                    mm)</label>
                                                <input type="number" name="roi_event_fid1_x_position"
                                                    class="form-control"
                                                    placeholder="values between 0 and 800 are accepted" min="0"
                                                    max="800"
                                                    value=<%=roi['roi_fiducials'][0]['fiducial'][0]['xposition'][0] %> >
                                            </div>
                                            <div class="form-group">
                                                <label class="label-text">Y Position of the Fiducial Point (in
                                                    mm)</label>
                                                <input type="number" name="roi_event_fid1_y_position"
                                                    class="form-control"
                                                    placeholder="values between 0 and 800 are accepted" min="0"
                                                    max="800"
                                                    value=<%=roi['roi_fiducials'][0]['fiducial'][0]['yposition'][0] %> >
                                            </div>
                                            <div class="form-group">
                                                <label class="label-text">Z Position of the Fiducial Point (in
                                                    mm)</label>
                                                <input type="number" name="roi_event_fid1_z_position"
                                                    class="form-control"
                                                    placeholder="values between 0 and 800 are accepted" min="0"
                                                    max="800"
                                                    value=<%=roi['roi_fiducials'][0]['fiducial'][0]['zposition'][0] %> >
                                            </div>
                                            <div class="form-group">
                                                <label class="label-text">Date</label>
                                                <input class="form-control" type="date"
                                                    id="roi_event_fid1_experiment_date"
                                                    name="roi_event_fid1_experiment_date" min="2012-01-01"
                                                    max="2040-12-31"
                                                    value=<%=roi['roi_fiducials'][0]['fiducial'][0]['entered_date'][0]
                                                    %> >
                                            </div>
                                            <div class="form-group">
                                                <label class="label-text">Time</label>
                                                <input class="form-control" type="time"
                                                    id="roi_event_fid1_experiment_time"
                                                    name="roi_event_fid1_experiment_time"
                                                    value=<%=roi['roi_fiducials'][0]['fiducial'][0]['entered_time'][0]
                                                    %> >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="card card-body">
                                            <div class="form-check">
                                                <label class="form-check-label"
                                                    for="roi_event_fid2_validity">Validity</label>
                                                <input type="checkbox" class="form-check-input"
                                                    id="roi_event_fid2_validity" name="roi_event_fid2_validity"
                                                    checked=<%=roi['roi_fiducials'][0]['fiducial'][1]['validity'] %> >
                                            </div>
                                            <div class="form-group">
                                                <label class="label-text"
                                                    for="roi_event_fid2_FiducialPositionSelect">Position of
                                                    the Fiducial
                                                    Point</label>
                                                <select class="form-control" id="roi_event_fid2_FiducialPositionSelect"
                                                    name="roi_event_fid2_position_name">
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][1]['position_name']=='top-left'
                                                        ? 'selected' : '' %>>top-left</option>
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][1]['position_name']=='top-right'
                                                        ? 'selected' : '' %>>top-right</option>
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][1]['position_name']=='bottom-left'
                                                        ? 'selected' : '' %>>bottom-left</option>
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][1]['position_name']=='bottom-right'
                                                        ? 'selected' : '' %>>bottom-right</option>
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][1]['position_name']=='top-center'
                                                        ? 'selected' : '' %>>top-center</option>
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][1]['position_name']=='bottom-center'
                                                        ? 'selected' : '' %>>bottom-center</option>
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][1]['position_name']=='left-center'
                                                        ? 'selected' : '' %>>left-center</option>
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][1]['position_name']=='right-center'
                                                        ? 'selected' : '' %>>right-center</option>
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][1]['position_name']=='center'
                                                        ? 'selected' : '' %>>center</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label class="label-text">X Position of the Fiducial Point (in
                                                    mm)</label>
                                                <input type="number" name="roi_event_fid2_x_position"
                                                    class="form-control"
                                                    placeholder="values between 0 and 800 are accepted" min="0"
                                                    max="800"
                                                    value=<%=roi['roi_fiducials'][0]['fiducial'][1]['xposition'][0] %> >
                                            </div>
                                            <div class="form-group">
                                                <label class="label-text">Y Position of the Fiducial Point (in
                                                    mm)</label>
                                                <input type="number" name="roi_event_fid2_y_position"
                                                    class="form-control"
                                                    placeholder="values between 0 and 800 are accepted" min="0"
                                                    max="800"
                                                    value=<%=roi['roi_fiducials'][0]['fiducial'][1]['yposition'][0] %> >
                                            </div>
                                            <div class="form-group">
                                                <label class="label-text">Z Position of the Fiducial Point (in
                                                    mm)</label>
                                                <input type="number" name="roi_event_fid2_z_position"
                                                    class="form-control"
                                                    placeholder="values between 0 and 800 are accepted" min="0"
                                                    max="800"
                                                    value=<%=roi['roi_fiducials'][0]['fiducial'][1]['zposition'][0] %> >
                                            </div>
                                            <div class="form-group">
                                                <label class="label-text">Date</label>
                                                <input class="form-control" type="date"
                                                    id="roi_event_fid2_experiment_date"
                                                    name="roi_event_fid2_experiment_date" min="2012-01-01"
                                                    max="2040-12-31"
                                                    value=<%=roi['roi_fiducials'][0]['fiducial'][1]['entered_date'][0]
                                                    %> >
                                            </div>
                                            <div class="form-group">
                                                <label class="label-text">Time</label>
                                                <input class="form-control" type="time"
                                                    id="roi_event_fid2_experiment_time"
                                                    name="roi_event_fid1_experiment_time"
                                                    value=<%=roi['roi_fiducials'][0]['fiducial'][1]['entered_time'][0]
                                                    %> >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="card card-body">
                                            <div class="form-check">
                                                <label class="form-check-label"
                                                    for="roi_event_fid3_validity">Validity</label>
                                                <input type="checkbox" class="form-check-input"
                                                    id="roi_event_fid3_validity" name="roi_event_fid3_validity"
                                                    checked=<%=roi['roi_fiducials'][0]['fiducial'][2]['validity'] %> >
                                            </div>
                                            <div class="form-group">
                                                <label class="label-text"
                                                    for="roi_event_fid3_FiducialPositionSelect">Position of
                                                    the Fiducial
                                                    Point</label>
                                                <select class="form-control" id="roi_event_fid3_FiducialPositionSelect"
                                                    name="roi_event_fid3_position_name">
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][2]['position_name']=='top-left'
                                                        ? 'selected' : '' %>>top-left</option>
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][2]['position_name']=='top-right'
                                                        ? 'selected' : '' %>>top-right</option>
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][2]['position_name']=='bottom-left'
                                                        ? 'selected' : '' %>>bottom-left</option>
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][2]['position_name']=='bottom-right'
                                                        ? 'selected' : '' %>>bottom-right</option>
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][2]['position_name']=='top-center'
                                                        ? 'selected' : '' %>>top-center</option>
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][2]['position_name']=='bottom-center'
                                                        ? 'selected' : '' %>>bottom-center</option>
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][2]['position_name']=='left-center'
                                                        ? 'selected' : '' %>>left-center</option>
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][2]['position_name']=='right-center'
                                                        ? 'selected' : '' %>>right-center</option>
                                                    <option
                                                        <%=roi['roi_fiducials'][0]['fiducial'][2]['position_name']=='center'
                                                        ? 'selected' : '' %>>center</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label class="label-text">X Position of the Fiducial Point (in
                                                    mm)</label>
                                                <input type="number" name="roi_event_fid3_x_position"
                                                    class="form-control"
                                                    placeholder="values between 0 and 800 are accepted" min="0"
                                                    max="800"
                                                    value=<%=roi['roi_fiducials'][0]['fiducial'][2]['xposition'][0] %> >
                                            </div>
                                            <div class="form-group">
                                                <label class="label-text">Y Position of the Fiducial Point (in
                                                    mm)</label>
                                                <input type="number" name="roi_event_fid3_y_position"
                                                    class="form-control"
                                                    placeholder="values between 0 and 800 are accepted" min="0"
                                                    max="800"
                                                    value=<%=roi['roi_fiducials'][0]['fiducial'][2]['yposition'][0] %> >
                                            </div>
                                            <div class="form-group">
                                                <label class="label-text">Z Position of the Fiducial Point (in
                                                    mm)</label>
                                                <input type="number" name="roi_event_fid3_z_position"
                                                    class="form-control"
                                                    placeholder="values between 0 and 800 are accepted" min="0"
                                                    max="800"
                                                    value=<%=roi['roi_fiducials'][0]['fiducial'][2]['zposition'][0] %> >
                                            </div>
                                            <div class="form-group">
                                                <label class="label-text">Date</label>
                                                <input class="form-control" type="date"
                                                    id="roi_event_fid3_experiment_date"
                                                    name="roi_event_fid3_experiment_date" min="2012-01-01"
                                                    max="2040-12-31"
                                                    value=<%=roi['roi_fiducials'][0]['fiducial'][2]['entered_date'][0]
                                                    %> >
                                            </div>
                                            <div class="form-group">
                                                <label class="label-text">Time</label>
                                                <input class="form-control" type="time"
                                                    id="roi_event_fid3_experiment_time"
                                                    name="roi_event_fid3_experiment_time"
                                                    value=<%=roi['roi_fiducials'][0]['fiducial'][2]['entered_time'][0]
                                                    %> >
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <hr>

                                <p class="lead_text">Region of Interest (ROI) Information</p>
                                <div class="row twopanel">
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label class="label-text" for="ROITypeSelect">ROI Type</label>
                                            <select class="form-control" id="ROITypeSelect" name="roi_type">
                                                <option <%=roi['roi_data'][0]['roi_type'][0]=='Sample Piece'
                                                    ? 'selected' : '' %> >Sample Piece</option>
                                                <option <%=roi['roi_data'][0]['roi_type'][0]=='Manual Selection'
                                                    ? 'selected' : '' %> >Manual Selection</option>
                                                <option <%=roi['roi_data'][0]['roi_type'][0]=='Detection Algorithm'
                                                    ? 'selected' : '' %> >Detection Algorithm</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label class="label-text" for="ROIDetectionMethodSelect">Detection
                                                Method</label>
                                            <select class="form-control" id="ROIDetectionMethodSelect"
                                                name="roi_detection_method">
                                                <option <%=roi['roi_data'][0]['detection_method'][0]=='Circle Detection'
                                                    ? 'selected' : '' %> >Circle Detection</option>
                                                <option
                                                    <%=roi['roi_data'][0]['detection_method'][0]=='Rectangle Detection'
                                                    ? 'selected' : '' %> >Rectangle Detection</option>
                                                <option <%=roi['roi_data'][0]['detection_method'][0]=='Mask R-CNN'
                                                    ? 'selected' : '' %> >Mask R-CNN</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="row twopanel">
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label class="label-text">Bounding Box X Position</label>
                                            <input type="number" name="roi_experiment_x_position" class="form-control"
                                                placeholder="values between 0 and 800 are accepted" min="0" max="800"
                                                value=<%=roi['roi_data'][0]['bb_x_position'][0] %> >
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label class="label-text">Bounding Box Y Position</label>
                                            <input type="number" name="roi_experiment_y_position" class="form-control"
                                                placeholder="values between 0 and 800 are accepted" min="0" max="800"
                                                value=<%=roi['roi_data'][0]['bb_y_position'][0] %> >
                                        </div>
                                    </div>
                                </div>
                                <div class="row twopanel">
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label class="label-text">Bounding Box Width</label>
                                            <input type="number" name="roi_experiment_width" class="form-control"
                                                placeholder="values between 0 and 800 are accepted" min="0" max="800"
                                                value=<%=roi['roi_data'][0]['bb_width'][0] %> >
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label class="label-text">Bounding Box Height</label>
                                            <input type="number" name="roi_experiment_height" class="form-control"
                                                placeholder="values between 0 and 800 are accepted" min="0" max="800"
                                                value=<%=roi['roi_data'][0]['bb_height'][0] %> >
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="ROIMaskLoad" class="form-label label-text">Mask Image</label>
                                    <input class="form-control" type="text" id="ROIMaskLoad" name="roi_mask_load"
                                        value=<%=roi['roi_data'][0]['mask_image'][0] %> >
                                </div>
                                <div class="row twopanel">
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label class="label-text">Date of the ROI Experiment</label>
                                            <input class="form-control" type="date" id="roi_experiment_date"
                                                name="roi_experiment_date" min="2012-01-01" max="2040-12-31"
                                                value=<%=roi['roi_data'][0]['entered_date'][0] %> >
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label class="label-text">Time of the ROI Experiment</label>
                                            <input class="form-control" type="time" id="roi_experiment_time"
                                                name="roi_experiment_time"
                                                value=<%=roi['roi_data'][0]['entered_time'][0] %>
                                            >
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="roi_experiment_comments" class="label-text">Comments Related to the ROI
                                        Experiment</label>
                                    <textarea class="form-control" id="roi_experiment_comments"
                                        name="roi_experiment_comments" placeholder="Maximum 100 characters are accepted"
                                        rows="2" minlength="0" maxlength="200"
                                        value=<%=roi['roi_data'][0]['comments'][0] %> ></textarea>
                                </div>
                                <hr>

                                <div class="row twopanel">
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label class="label-text" for="ROIDeviceSelect">Device</label>
                                            <select class="form-control" id="roi_device" name="roi_device">
                                                <option <%=roi['roi_event'][0]['device'][0]=='Keyence' ? 'selected' : ''
                                                    %>
                                                    >Keyence</option>
                                                <option <%=roi['roi_event'][0]['device'][0]=='Nanofocus' ? 'selected'
                                                    : '' %> >Nanofocus</option>
                                                <option <%=roi['roi_event'][0]['device'][0]=='Quanta' ? 'selected' : ''
                                                    %>
                                                    >Quanta</option>
                                                <option <%=roi['roi_event'][0]['device'][0]=='Zeiss' ? 'selected' : ''
                                                    %>
                                                    >Zeiss</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label class="label-text" for="ROIEventType">Event Type</label>
                                            <select class="form-control" id="roi_event_type" name="roi_event_type">
                                                <option <%=roi['roi_event'][0]['event_type'][0]=='XRay Measurement'
                                                    ? 'selected' : '' %> >XRay Measurement</option>
                                                <option
                                                    <%=roi['roi_event'][0]['event_type'][0]=='XFEL Instrument Measurement'
                                                    ? 'selected' : '' %> >XFEL Instrument Measurement</option>
                                                <option <%=roi['roi_event'][0]['event_type'][0]=='Imaging' ? 'selected'
                                                    : '' %> >Imaging</option>
                                                <option
                                                    <%=roi['roi_event'][0]['event_type'][0]=='High Resolution Imaging'
                                                    ? 'selected' : '' %>>High Resolution Imaging</option>
                                                <option <%=roi['roi_event'][0]['event_type'][0]=='Overview Imaging'
                                                    ? 'selected' : '' %> >Overview Imaging</option>
                                                <option <%=roi['roi_event'][0]['event_type'][0]=='Mounted' ? 'selected'
                                                    : '' %> >Mounted</option>
                                                <option <%=roi['roi_event'][0]['event_type'][0]=='Unmounted'
                                                    ? 'selected' : '' %> >Unmounted</option>
                                                <option
                                                    <%=roi['roi_event'][0]['event_type'][0]=='Mounted Somewhere Else'
                                                    ? 'selected' : '' %> >Mounted Somewhere Else</option>
                                                <option <%=roi['roi_event'][0]['event_type'][0]=='Shot' ? 'selected'
                                                    : '' %>
                                                    >Shot</option>
                                                <option <%=roi['roi_event'][0]['event_type'][0]=='Broken' ? 'selected'
                                                    : '' %> >Broken</option>
                                                <option <%=roi['roi_event'][0]['event_type'][0]=='Archived' ? 'selected'
                                                    : '' %> >Archived</option>
                                                <option <%=roi['roi_event'][0]['event_type'][0]=='Destroyed'
                                                    ? 'selected' : '' %> >Destroyed</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="row twopanel">
                                    <div class="col-lg-6">
                                        <div>
                                            <label for="ROIEventLinkToData" class="form-label label-text">Link to the
                                                Data</label>
                                            <input class="form-control" type="text" id="ROIEventLinkToData"
                                                name="roi_event_link_to_data"
                                                value=<%=roi['roi_event'][0]['loaded_data'][0] %> >
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div>
                                            <label for="ROIEventLinkToMetaData" class="form-label label-text">Link to
                                                the
                                                Meta Data</label>
                                            <input class="form-control" type="text" id="ROIEventLinkToMetaData"
                                                name="roi_event_link_to_meta_data"
                                                value=<%=roi['roi_event'][0]['text_data'][0] %> >
                                        </div>
                                    </div>
                                </div>
                                <div class="row twopanel">
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label class="label-text">Date of the ROI Event</label>
                                            <input class="form-control" type="date" id="roi_event_date"
                                                name="roi_event_date" min="2012-01-01" max="2040-12-31"
                                                value=<%=roi['roi_event'][0]['event_date'][0] %> >
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label class="label-text">Time of the ROI Event</label>
                                            <input class="form-control" type="time" id="roi_event_time"
                                                name="roi_event_time" value=<%=roi['roi_event'][0]['event_time'][0] %> >
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="roi_experiment_comments" class="label-text">Comments Related to the ROI
                                        Event</label>
                                    <textarea class="form-control" id="roi_event_comments" name="roi_event_comments"
                                        placeholder="Maximum 100 of characters are accepted" rows="2" minlength="0"
                                        maxlength="200" value=<%=roi['roi_event'][0]['comments'][0] %> ></textarea>
                                </div>
                                <hr>

                                <% roi['sample'].forEach(function(sample){ %>
                                    <div class="container-fluid">
                                        <div class="row">
                                            <button class="btn btn-secondary" type="button" data-bs-toggle="collapse"
                                                data-bs-target="#<%= sample['name'][0].concat(roi['name'][0]) %>" aria-expanded="false"
                                                aria-controls="<%= sample['name'][0].concat(roi['name'][0]) %>">
                                                Sample (<%= sample['name'][0] %>)
                                            </button>
                                        </div>
                                    </div>
                                    <div class="collapse" id="<%= sample['name'][0].concat(roi['name'][0]) %>">
                                        <p class="lead_text">Fiducial Points Infromation to be used by Samples for
                                            Sample
                                            Name = (<%= sample['name'][0] %>)</p>
                                        <div class="row twopanel">
                                            <div class="col-lg-4">
                                                <div>
                                                    <p class="lead_text">Fiducial 1 Information</p>
                                                </div>
                                            </div>
                                            <div class="col-lg-4">
                                                <div>
                                                    <p class="lead_text">Fiducial 2 Information</p>
                                                </div>
                                            </div>
                                            <div class="col-lg-4">
                                                <div>
                                                    <p class="lead_text">Fiducial 3 Information</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row twopanel">
                                            <div class="col-lg-4">
                                                <div class="card card-body">
                                                    <div class="form-check">
                                                        <label class="form-check-label"
                                                            for="sample_event_fid1_validity">Validity</label>
                                                        <input type="checkbox" class="form-check-input"
                                                            id="sample_event_fid1_validity"
                                                            name="sample_event_fid1_validity"
                                                            checked=<%=sample['sample_fiducials'][0]['fiducial'][0]['validity']
                                                            %>>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="label-text"
                                                            for="sample_event_fid1_FiducialPositionSelect">Position of
                                                            the Fiducial
                                                            Point</label>
                                                        <select class="form-control"
                                                            id="sample_event_fid1_FiducialPositionSelect"
                                                            name="sample_event_fid1_position_name">
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][0]['position_name']=='top-left'
                                                                ? 'selected' : '' %> >top-left</option>
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][0]['position_name']=='top-right'
                                                                ? 'selected' : '' %> >top-right</option>
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][0]['position_name']=='bottom-left'
                                                                ? 'selected' : '' %> >bottom-left</option>
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][0]['position_name']=='bottom-right'
                                                                ? 'selected' : '' %> >bottom-right</option>
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][0]['position_name']=='top-center'
                                                                ? 'selected' : '' %> >top-center</option>
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][0]['position_name']=='bottom-center'
                                                                ? 'selected' : '' %> >bottom-center</option>
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][0]['position_name']=='left-center'
                                                                ? 'selected' : '' %> >left-center</option>
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][0]['position_name']=='right-center'
                                                                ? 'selected' : '' %> >right-center</option>
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][0]['position_name']=='center'
                                                                ? 'selected' : '' %> >center</option>
                                                        </select>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="label-text">X Position of the Fiducial Point (in
                                                            mm)</label>
                                                        <input type="number" name="sample_event_fid1_x_position"
                                                            class="form-control"
                                                            placeholder="values between 0 and 800 are accepted" min="0"
                                                            max="800"
                                                            value=<%=sample['sample_fiducials'][0]['fiducial'][0]['xposition'][0]
                                                            %> >
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="label-text">Y Position of the Fiducial Point (in
                                                            mm)</label>
                                                        <input type="number" name="sample_event_fid1_y_position"
                                                            class="form-control"
                                                            placeholder="values between 0 and 800 are accepted" min="0"
                                                            max="800"
                                                            value=<%=sample['sample_fiducials'][0]['fiducial'][0]['yposition'][0]
                                                            %> >
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="label-text">Z Position of the Fiducial Point (in
                                                            mm)</label>
                                                        <input type="number" name="sample_event_fid1_z_position"
                                                            class="form-control"
                                                            placeholder="values between 0 and 800 are accepted" min="0"
                                                            max="800"
                                                            value=<%=sample['sample_fiducials'][0]['fiducial'][0]['zposition'][0]
                                                            %> >
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="label-text">Date</label>
                                                        <input class="form-control" type="date"
                                                            id="sample_event_fid1_experiment_date"
                                                            name="sample_event_fid1_experiment_date" min="2012-01-01"
                                                            max="2040-12-31"
                                                            value=<%=sample['sample_fiducials'][0]['fiducial'][0]['entered_date'][0]
                                                            %> >
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="label-text">Time</label>
                                                        <input class="form-control" type="time"
                                                            id="sample_event_fid1_experiment_time"
                                                            name="sample_event_fid1_experiment_time"
                                                            value=<%=sample['sample_fiducials'][0]['fiducial'][0]['entered_time'][0]
                                                            %> >
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-4">
                                                <div class="card card-body">
                                                    <div class="form-check">
                                                        <label class="form-check-label"
                                                            for="sample_event_fid2_validity">Validity</label>
                                                        <input type="checkbox" class="form-check-input"
                                                            id="sample_event_fid2_validity"
                                                            name="sample_event_fid2_validity"
                                                            checked=<%=sample['sample_fiducials'][0]['fiducial'][1]['validity']
                                                            %>>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="label-text"
                                                            for="sample_event_fid2_FiducialPositionSelect">Position of
                                                            the Fiducial
                                                            Point</label>
                                                        <select class="form-control"
                                                            id="sample_event_fid2_FiducialPositionSelect"
                                                            name="sample_event_fid2_position_name">
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][1]['position_name']=='top-left'
                                                                ? 'selected' : '' %> >top-left</option>
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][1]['position_name']=='top-right'
                                                                ? 'selected' : '' %> >top-right</option>
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][1]['position_name']=='bottom-left'
                                                                ? 'selected' : '' %> >bottom-left</option>
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][1]['position_name']=='bottom-right'
                                                                ? 'selected' : '' %> >bottom-right</option>
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][1]['position_name']=='top-center'
                                                                ? 'selected' : '' %> >top-center</option>
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][1]['position_name']=='bottom-center'
                                                                ? 'selected' : '' %> >bottom-center</option>
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][1]['position_name']=='left-center'
                                                                ? 'selected' : '' %> >left-center</option>
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][1]['position_name']=='right-center'
                                                                ? 'selected' : '' %> >right-center</option>
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][1]['position_name']=='center'
                                                                ? 'selected' : '' %> >center</option>
                                                        </select>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="label-text">X Position of the Fiducial Point (in
                                                            mm)</label>
                                                        <input type="number" name="sample_event_fid2_x_position"
                                                            class="form-control"
                                                            placeholder="values between 0 and 800 are accepted" min="0"
                                                            max="800"
                                                            value=<%=sample['sample_fiducials'][0]['fiducial'][1]['xposition'][0]
                                                            %> >
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="label-text">Y Position of the Fiducial Point (in
                                                            mm)</label>
                                                        <input type="number" name="sample_event_fid2_y_position"
                                                            class="form-control"
                                                            placeholder="values between 0 and 800 are accepted" min="0"
                                                            max="800"
                                                            value=<%=sample['sample_fiducials'][0]['fiducial'][1]['yposition'][0]
                                                            %> >
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="label-text">Z Position of the Fiducial Point (in
                                                            mm)</label>
                                                        <input type="number" name="sample_event_fid2_z_position"
                                                            class="form-control"
                                                            placeholder="values between 0 and 800 are accepted" min="0"
                                                            max="800"
                                                            value=<%=sample['sample_fiducials'][0]['fiducial'][1]['zposition'][0]
                                                            %> >
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="label-text">Date</label>
                                                        <input class="form-control" type="date"
                                                            id="sample_event_fid2_experiment_date"
                                                            name="sample_event_fid2_experiment_date" min="2012-01-01"
                                                            max="2040-12-31"
                                                            value=<%=sample['sample_fiducials'][0]['fiducial'][1]['entered_date'][0]
                                                            %> >
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="label-text">Time</label>
                                                        <input class="form-control" type="time"
                                                            id="sample_event_fid2_experiment_time"
                                                            name="sample_event_fid2_experiment_time"
                                                            value=<%=sample['sample_fiducials'][0]['fiducial'][1]['entered_time'][0]
                                                            %> >
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-4">
                                                <div class="card card-body">
                                                    <div class="form-check">
                                                        <label class="form-check-label"
                                                            for="sample_event_fid3_validity">Validity</label>
                                                        <input type="checkbox" class="form-check-input"
                                                            id="sample_event_fid3_validity"
                                                            name="sample_event_fid3_validity"
                                                            checked=<%=sample['sample_fiducials'][0]['fiducial'][2]['validity']
                                                            %>>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="label-text"
                                                            for="sample_event_fid3_FiducialPositionSelect">Position of
                                                            the Fiducial
                                                            Point</label>
                                                        <select class="form-control"
                                                            id="sample_event_fid3_FiducialPositionSelect"
                                                            name="sample_event_fid3_position_name">
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][2]['position_name']=='top-left'
                                                                ? 'selected' : '' %> >top-left</option>
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][2]['position_name']=='top-right'
                                                                ? 'selected' : '' %> >top-right</option>
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][2]['position_name']=='bottom-left'
                                                                ? 'selected' : '' %> >bottom-left</option>
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][2]['position_name']=='bottom-right'
                                                                ? 'selected' : '' %> >bottom-right</option>
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][2]['position_name']=='top-center'
                                                                ? 'selected' : '' %> >top-center</option>
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][2]['position_name']=='bottom-center'
                                                                ? 'selected' : '' %> >bottom-center</option>
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][2]['position_name']=='left-center'
                                                                ? 'selected' : '' %> >left-center</option>
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][2]['position_name']=='right-center'
                                                                ? 'selected' : '' %> >right-center</option>
                                                            <option
                                                                <%=sample['sample_fiducials'][0]['fiducial'][2]['position_name']=='center'
                                                                ? 'selected' : '' %> >center</option>
                                                        </select>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="label-text">X Position of the Fiducial Point (in
                                                            mm)</label>
                                                        <input type="number" name="sample_event_fid3_x_position"
                                                            class="form-control"
                                                            placeholder="values between 0 and 800 are accepted" min="0"
                                                            max="800"
                                                            value=<%=sample['sample_fiducials'][0]['fiducial'][2]['xposition'][0]
                                                            %> >
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="label-text">Y Position of the Fiducial Point (in
                                                            mm)</label>
                                                        <input type="number" name="sample_event_fid3_y_position"
                                                            class="form-control"
                                                            placeholder="values between 0 and 800 are accepted" min="0"
                                                            max="800"
                                                            value=<%=sample['sample_fiducials'][0]['fiducial'][2]['yposition'][0]
                                                            %> >
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="label-text">Z Position of the Fiducial Point (in
                                                            mm)</label>
                                                        <input type="number" name="sample_event_fid3_z_position"
                                                            class="form-control"
                                                            placeholder="values between 0 and 800 are accepted" min="0"
                                                            max="800"
                                                            value=<%=sample['sample_fiducials'][0]['fiducial'][2]['zposition'][0]
                                                            %> >
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="label-text">Date</label>
                                                        <input class="form-control" type="date"
                                                            id="sample_event_fid3_experiment_date"
                                                            name="sample_event_fid3_experiment_date" min="2012-01-01"
                                                            max="2040-12-31"
                                                            value=<%=sample['sample_fiducials'][0]['fiducial'][2]['entered_date'][0]
                                                            %> >
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="label-text">Time</label>
                                                        <input class="form-control" type="time"
                                                            id="sample_event_fid3_experiment_time"
                                                            name="sample_event_fid3_experiment_time"
                                                            value=<%=sample['sample_fiducials'][0]['fiducial'][2]['entered_time'][0]
                                                            %> >
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <hr>
                                        <p class="lead_text">Sample Information</p>
                                        <div class="row twopanel">
                                            <div class="col-lg-6">
                                                <div class="form-group">
                                                    <label class="label-text">Bounding Box X Position</label>
                                                    <input type="number" name="sample_experiment_x_position"
                                                        class="form-control"
                                                        placeholder="values between 0 and 800 are accepted" min="0"
                                                        max="800" value=<%=sample['sample_data'][0]['bb_x_position'][0]
                                                        %> >
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="form-group">
                                                    <label class="label-text">Bounding Box Y Position</label>
                                                    <input type="number" name="sample_experiment_y_position"
                                                        class="form-control"
                                                        placeholder="values between 0 and 800 are accepted" min="0"
                                                        max="800" value=<%=sample['sample_data'][0]['bb_y_position'][0]
                                                        %> >
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row twopanel">
                                            <div class="col-lg-6">
                                                <div class="form-group">
                                                    <label class="label-text">Bounding Box Width</label>
                                                    <input type="number" name="sample_experiment_width"
                                                        class="form-control"
                                                        placeholder="values between 0 and 800 are accepted" min="0"
                                                        max="800" value=<%=sample['sample_data'][0]['bb_width'][0] %> >
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="form-group">
                                                    <label class="label-text">Bounding Box Height</label>
                                                    <input type="number" name="sample_experiment_height"
                                                        class="form-control"
                                                        placeholder="values between 0 and 800 are accepted" min="0"
                                                        max="800" value=<%=sample['sample_data'][0]['bb_height'][0] %> >
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row twopanel">
                                            <div class="col-lg-6">
                                                <div class="form-group">
                                                    <label class="label-text"
                                                        for="SampleDetectionMethodSelect">Detection
                                                        Method</label>
                                                    <select class="form-control" id="SampleDetectionMethodSelect"
                                                        name="sample_detection_method">
                                                        <option
                                                            <%=sample['sample_data'][0]['detection_method']=='Circle Detection'
                                                            ? 'selected' : '' %> >Circle Detection</option>
                                                        <option
                                                            <%=sample['sample_data'][0]['detection_method']=='Rectangle Detection'
                                                            ? 'selected' : '' %> >Rectangle Detection</option>
                                                        <option
                                                            <%=sample['sample_data'][0]['detection_method']=='Mask R-CNN'
                                                            ? 'selected' : '' %> >Mask R-CNN</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="form-group">
                                                    <label for="SampleMaskLoad" class="form-label label-text">Mask
                                                        Image</label>
                                                    <input class="form-control" type="text" id="SampleMaskLoad"
                                                        name="sample_mask_load"
                                                        value=<%=sample['sample_data'][0]['mask_image'][0] %> >
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row twopanel">
                                            <div class="col-lg-6">
                                                <div class="form-group">
                                                    <label class="label-text">Date of the Sample Experiment</label>
                                                    <input class="form-control" type="date" id="sample_experiment_date"
                                                        name="sample_experiment_date" min="2012-01-01" max="2040-12-31"
                                                        value=<%=sample['sample_data'][0]['entered_date'][0] %> >
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="form-group">
                                                    <label class="label-text">Time of the Sample Experiment</label>
                                                    <input class="form-control" type="time" id="sample_experiment_time"
                                                        name="sample_experiment_time"
                                                        value=<%=sample['sample_data'][0]['entered_time'][0] %>>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sample_experiment_comments" class="label-text">Comments Related
                                                to
                                                the Sample
                                                Experiment</label>
                                            <textarea class="form-control" id="sample_experiment_comments"
                                                name="sample_experiment_comments"
                                                placeholder="Maximum 100 characters are accepted" rows="2" minlength="0"
                                                maxlength="200" value=<%=sample['sample_data'][0]['comments'][0]
                                                %> ></textarea>
                                        </div>
                                        <hr>
                                        <div class="row twopanel">
                                            <div class="col-lg-6">
                                                <div class="form-group">
                                                    <label class="label-text" for="SanokeDeviceSelect">Device</label>
                                                    <select class="form-control" id="sample_device"
                                                        name="sample_device">
                                                        <option <%=sample['sample_event'][0]['device']=='Keyence'
                                                            ? 'selected' : '' %> >Keyence</option>
                                                        <option <%=sample['sample_event'][0]['device']=='Nanofocus'
                                                            ? 'selected' : '' %> >Nanofocus</option>
                                                        <option <%=sample['sample_event'][0]['device']=='Quanta'
                                                            ? 'selected' : '' %> >Quanta</option>
                                                        <option <%=sample['sample_event'][0]['device']=='Zeiss'
                                                            ? 'selected' : '' %> >Zeiss</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="form-group">
                                                    <label class="label-text" for="SampleEventType">Event Type</label>
                                                    <select class="form-control" id="sample_event_type"
                                                        name="sample_event_type">
                                                        <option
                                                            <%=sample['sample_event'][0]['event_type']=='XRay Measurement'
                                                            ? 'selected' : '' %> >XRay Measurement</option>
                                                        <option
                                                            <%=sample['sample_event'][0]['event_type']=='XFEL Instrument Measurement'
                                                            ? 'selected' : '' %> >XFEL Instrument Measurement</option>
                                                        <option <%=sample['sample_event'][0]['event_type']=='Imaging'
                                                            ? 'selected' : '' %> >Imaging</option>
                                                        <option
                                                            <%=sample['sample_event'][0]['event_type']=='High Resolution Imaging'
                                                            ? 'selected' : '' %> >High Resolution Imaging</option>
                                                        <option
                                                            <%=sample['sample_event'][0]['event_type']=='Overview Imaging'
                                                            ? 'selected' : '' %> >Overview Imaging</option>
                                                        <option <%=sample['sample_event'][0]['event_type']=='Mounted'
                                                            ? 'selected' : '' %> >Mounted</option>
                                                        <option <%=sample['sample_event'][0]['event_type']=='Unmounted'
                                                            ? 'selected' : '' %> >Unmounted</option>
                                                        <option
                                                            <%=sample['sample_event'][0]['event_type']=='Mounted Somewhere Else'
                                                            ? 'selected' : '' %> >Mounted Somewhere Else</option>
                                                        <option <%=sample['sample_event'][0]['event_type']=='Shot'
                                                            ? 'selected' : '' %> >Shot</option>
                                                        <option <%=sample['sample_event'][0]['event_type']=='Broken'
                                                            ? 'selected' : '' %> >Broken</option>
                                                        <option <%=sample['sample_event'][0]['event_type']=='Archived'
                                                            ? 'selected' : '' %> >Archived</option>
                                                        <option <%=sample['sample_event'][0]['event_type']=='Destroyed'
                                                            ? 'selected' : '' %> >Destroyed</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row twopanel">
                                            <div class="col-lg-6">
                                                <div>
                                                    <label for="SampleEventLinkToData"
                                                        class="form-label label-text">Link to
                                                        the
                                                        Data</label>
                                                    <input class="form-control" type="text" id="SampleEventLinkToData"
                                                        name="sample_event_link_to_data"
                                                        value=<%=sample['sample_event'][0]['loaded_data'][0] %> >
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div>
                                                    <label for="SampleEventLinkToMetaData"
                                                        class="form-label label-text">Link to the
                                                        Meta
                                                        Data</label>
                                                    <input class="form-control" type="text"
                                                        id="SampleEventLinkToMetaData"
                                                        name="sample_event_link_to_meta_data"
                                                        value=<%=sample['sample_event'][0]['text_data'][0] %> >
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row twopanel">
                                            <div class="col-lg-6">
                                                <div class="form-group">
                                                    <label class="label-text">Date of the Sample Event</label>
                                                    <input class="form-control" type="date" id="sample_event_date"
                                                        name="sample_event_date" min="2012-01-01" max="2040-12-31"
                                                        value=<%=sample['sample_event'][0]['event_date'][0] %> >
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="form-group">
                                                    <label class="label-text">Time of the Sample Event</label>
                                                    <input class="form-control" type="time" id="sample_event_time"
                                                        name="sample_event_time"
                                                        value=<%=sample['sample_event'][0]['event_time'][0] %> >
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sample_experiment_comments" class="label-text">Comments Related
                                                to
                                                the Sample
                                                Event</label>
                                            <textarea class="form-control" id="sample_event_comments"
                                                name="sample_event_comments"
                                                placeholder="Maximum 100 of characters are accepted" rows="2"
                                                minlength="0" maxlength="200"
                                                value=<%=sample['sample_event'][0]['comments'][0] %> ></textarea>
                                        </div>
                                        <hr>

                                        <% sample['target'].forEach(function(target){ %>
                                            <% if (target['name']) { %>
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <button class="btn btn-secondary" type="button"
                                                            data-bs-toggle="collapse"
                                                            data-bs-target="#<%= target['name'][0].concat(sample['name'][0].concat(roi['name'][0])) %>"
                                                            aria-expanded="false"
                                                            aria-controls="<%= target['name'][0].concat(sample['name'][0].concat(roi['name'][0])) %>">
                                                            Target (<%= target['name'][0] %>)
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="collapse" id="<%= target['name'][0].concat(sample['name'][0].concat(roi['name'][0])) %>">
                                                    <p class="lead_text">Fiducial Points Infromation to be used by
                                                        Targets for Target Name = (<%= target['name'][0] %>)</p>
                                                    <div class="row twopanel">
                                                        <div class="col-lg-4">
                                                            <div>
                                                                <p class="lead_text">Fiducial 1 Information</p>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-4">
                                                            <div>
                                                                <p class="lead_text">Fiducial 2 Information</p>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-4">
                                                            <div>
                                                                <p class="lead_text">Fiducial 3 Information</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row twopanel">
                                                        <div class="col-lg-4">
                                                            <div class="card card-body">
                                                                <div class="form-check">
                                                                    <label class="form-check-label"
                                                                        for="target_event_fid1_validity">Validity</label>
                                                                    <input type="checkbox" class="form-check-input"
                                                                        id="target_event_fid1_validity"
                                                                        name="target_event_fid1_validity"
                                                                        checked=<%=target['target_fiducials'][0]['fiducial'][0]['validity']
                                                                        %> >
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="label-text"
                                                                        for="target_event_fid1_FiducialPositionSelect">Position
                                                                        of
                                                                        the Fiducial
                                                                        Point</label>
                                                                    <select class="form-control"
                                                                        id="target_event_fid1_FiducialPositionSelect"
                                                                        name="target_event_fid1_position_name">
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][0]['position_name']=='top-left'
                                                                            ? 'selected' : '' %> >top-left</option>
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][0]['position_name']=='top-right'
                                                                            ? 'selected' : '' %> >top-right</option>
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][0]['position_name']=='bottom-left'
                                                                            ? 'selected' : '' %> >bottom-left
                                                                        </option>
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][0]['position_name']=='bottom-right'
                                                                            ? 'selected' : '' %> >bottom-right
                                                                        </option>
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][0]['position_name']=='top-center'
                                                                            ? 'selected' : '' %> >top-center
                                                                        </option>
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][0]['position_name']=='bottom-center'
                                                                            ? 'selected' : '' %> >bottom-center
                                                                        </option>
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][0]['position_name']=='left-center'
                                                                            ? 'selected' : '' %> >left-center
                                                                        </option>
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][0]['position_name']=='right-center'
                                                                            ? 'selected' : '' %> >right-center
                                                                        </option>
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][0]['position_name']=='center'
                                                                            ? 'selected' : '' %> >center</option>
                                                                    </select>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="label-text">X Position of the
                                                                        Fiducial
                                                                        Point (in mm)</label>
                                                                    <input type="number"
                                                                        name="target_event_fid1_x_position"
                                                                        class="form-control"
                                                                        placeholder="values between 0 and 800 are accepted"
                                                                        min="0" max="800"
                                                                        value=<%=target['target_fiducials'][0]['fiducial'][0]['xposition'][0]
                                                                        %> >
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="label-text">Y Position of the
                                                                        Fiducial
                                                                        Point (in mm)</label>
                                                                    <input type="number"
                                                                        name="target_event_fid1_y_position"
                                                                        class="form-control"
                                                                        placeholder="values between 0 and 800 are accepted"
                                                                        min="0" max="800"
                                                                        value=<%=target['target_fiducials'][0]['fiducial'][0]['yposition'][0]
                                                                        %> >
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="label-text">Z Position of the
                                                                        Fiducial
                                                                        Point (in mm)</label>
                                                                    <input type="number"
                                                                        name="target_event_fid1_z_position"
                                                                        class="form-control"
                                                                        placeholder="values between 0 and 800 are accepted"
                                                                        min="0" max="800"
                                                                        value=<%=target['target_fiducials'][0]['fiducial'][0]['zposition'][0]
                                                                        %> >
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="label-text">Date</label>
                                                                    <input class="form-control" type="date"
                                                                        id="target_event_fid1_experiment_date"
                                                                        name="target_event_fid1_experiment_date"
                                                                        min="2012-01-01" max="2040-12-31"
                                                                        value=<%=target['target_fiducials'][0]['fiducial'][0]['entered_date'][0]
                                                                        %> >
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="label-text">Time</label>
                                                                    <input class="form-control" type="time"
                                                                        id="target_event_fid1_experiment_time"
                                                                        name="target_event_fid1_experiment_time"
                                                                        value=<%=target['target_fiducials'][0]['fiducial'][0]['entered_time'][0]
                                                                        %> >
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-4">
                                                            <div class="card card-body">
                                                                <div class="form-check">
                                                                    <label class="form-check-label"
                                                                        for="target_event_fid2_validity">Validity</label>
                                                                    <input type="checkbox" class="form-check-input"
                                                                        id="target_event_fid2_validity"
                                                                        name="target_event_fid2_validity"
                                                                        checked=<%=target['target_fiducials'][0]['fiducial'][1]['validity']
                                                                        %> >
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="label-text"
                                                                        for="target_event_fid2_FiducialPositionSelect">Position
                                                                        of
                                                                        the Fiducial
                                                                        Point</label>
                                                                    <select class="form-control"
                                                                        id="target_event_fid2_FiducialPositionSelect"
                                                                        name="target_event_fid2_position_name">
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][1]['position_name']=='top-left'
                                                                            ? 'selected' : '' %> >top-left</option>
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][1]['position_name']=='top-right'
                                                                            ? 'selected' : '' %> >top-right</option>
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][1]['position_name']=='bottom-left'
                                                                            ? 'selected' : '' %> >bottom-left
                                                                        </option>
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][1]['position_name']=='bottom-right'
                                                                            ? 'selected' : '' %> >bottom-right
                                                                        </option>
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][1]['position_name']=='top-center'
                                                                            ? 'selected' : '' %> >top-center
                                                                        </option>
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][1]['position_name']=='bottom-center'
                                                                            ? 'selected' : '' %> >bottom-center
                                                                        </option>
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][1]['position_name']=='left-center'
                                                                            ? 'selected' : '' %> >left-center
                                                                        </option>
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][1]['position_name']=='right-center'
                                                                            ? 'selected' : '' %> >right-center
                                                                        </option>
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][1]['position_name']=='center'
                                                                            ? 'selected' : '' %> >center</option>
                                                                    </select>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="label-text">X Position of the
                                                                        Fiducial
                                                                        Point (in mm)</label>
                                                                    <input type="number"
                                                                        name="target_event_fid2_x_position"
                                                                        class="form-control"
                                                                        placeholder="values between 0 and 800 are accepted"
                                                                        min="0" max="800"
                                                                        value=<%=target['target_fiducials'][0]['fiducial'][1]['xposition'][0]
                                                                        %> >
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="label-text">Y Position of the
                                                                        Fiducial
                                                                        Point (in mm)</label>
                                                                    <input type="number"
                                                                        name="target_event_fid2_y_position"
                                                                        class="form-control"
                                                                        placeholder="values between 0 and 800 are accepted"
                                                                        min="0" max="800"
                                                                        value=<%=target['target_fiducials'][0]['fiducial'][1]['yposition'][0]
                                                                        %> >
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="label-text">Z Position of the
                                                                        Fiducial
                                                                        Point (in mm)</label>
                                                                    <input type="number"
                                                                        name="target_event_fid2_z_position"
                                                                        class="form-control"
                                                                        placeholder="values between 0 and 800 are accepted"
                                                                        min="0" max="800"
                                                                        value=<%=target['target_fiducials'][0]['fiducial'][1]['zposition'][0]
                                                                        %> >
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="label-text">Date</label>
                                                                    <input class="form-control" type="date"
                                                                        id="target_event_fid2_experiment_date"
                                                                        name="target_event_fid2_experiment_date"
                                                                        min="2012-01-01" max="2040-12-31"
                                                                        value=<%=target['target_fiducials'][0]['fiducial'][1]['entered_date'][0]
                                                                        %> >
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="label-text">Time</label>
                                                                    <input class="form-control" type="time"
                                                                        id="target_event_fid2_experiment_time"
                                                                        name="target_event_fid1_experiment_time"
                                                                        value=<%=target['target_fiducials'][0]['fiducial'][1]['entered_time'][0]
                                                                        %> >
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-4">
                                                            <div class="card card-body">
                                                                <div class="form-check">
                                                                    <label class="form-check-label"
                                                                        for="target_event_fid3_validity">Validity</label>
                                                                    <input type="checkbox" class="form-check-input"
                                                                        id="target_event_fid3_validity"
                                                                        name="target_event_fid3_validity"
                                                                        checked=<%=target['target_fiducials'][0]['fiducial'][2]['validity']
                                                                        %> >
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="label-text"
                                                                        for="target_event_fid3_FiducialPositionSelect">Position
                                                                        of
                                                                        the Fiducial
                                                                        Point</label>
                                                                    <select class="form-control"
                                                                        id="target_event_fid3_FiducialPositionSelect"
                                                                        name="target_event_fid3_position_name">
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][2]['position_name']=='top-left'
                                                                            ? 'selected' : '' %> >top-left</option>
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][2]['position_name']=='top-right'
                                                                            ? 'selected' : '' %> >top-right</option>
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][2]['position_name']=='bottom-left'
                                                                            ? 'selected' : '' %> >bottom-left
                                                                        </option>
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][2]['position_name']=='bottom-right'
                                                                            ? 'selected' : '' %> >bottom-right
                                                                        </option>
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][2]['position_name']=='top-center'
                                                                            ? 'selected' : '' %> >top-center
                                                                        </option>
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][2]['position_name']=='bottom-center'
                                                                            ? 'selected' : '' %> >bottom-center
                                                                        </option>
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][2]['position_name']=='left-center'
                                                                            ? 'selected' : '' %> >left-center
                                                                        </option>
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][2]['position_name']=='right-center'
                                                                            ? 'selected' : '' %> >right-center
                                                                        </option>
                                                                        <option
                                                                            <%=target['target_fiducials'][0]['fiducial'][2]['position_name']=='center'
                                                                            ? 'selected' : '' %> >center</option>
                                                                    </select>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="label-text">X Position of the
                                                                        Fiducial
                                                                        Point (in mm)</label>
                                                                    <input type="number"
                                                                        name="target_event_fid3_x_position"
                                                                        class="form-control"
                                                                        placeholder="values between 0 and 800 are accepted"
                                                                        min="0" max="800"
                                                                        value=<%=target['target_fiducials'][0]['fiducial'][2]['xposition'][0]
                                                                        %> >
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="label-text">Y Position of the
                                                                        Fiducial
                                                                        Point (in mm)</label>
                                                                    <input type="number"
                                                                        name="target_event_fid3_y_position"
                                                                        class="form-control"
                                                                        placeholder="values between 0 and 800 are accepted"
                                                                        min="0" max="800"
                                                                        value=<%=target['target_fiducials'][0]['fiducial'][2]['yposition'][0]
                                                                        %> >
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="label-text">Z Position of the
                                                                        Fiducial
                                                                        Point (in mm)</label>
                                                                    <input type="number"
                                                                        name="target_event_fid3_z_position"
                                                                        class="form-control"
                                                                        placeholder="values between 0 and 800 are accepted"
                                                                        min="0" max="800"
                                                                        value=<%=target['target_fiducials'][0]['fiducial'][2]['zposition'][0]
                                                                        %> >
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="label-text">Date</label>
                                                                    <input class="form-control" type="date"
                                                                        id="target_event_fid3_experiment_date"
                                                                        name="target_event_fid3_experiment_date"
                                                                        min="2012-01-01" max="2040-12-31"
                                                                        value=<%=target['target_fiducials'][0]['fiducial'][2]['entered_date'][0]
                                                                        %> >
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="label-text">Time</label>
                                                                    <input class="form-control" type="time"
                                                                        id="target_event_fid3_experiment_time"
                                                                        name="target_event_fid3_experiment_time"
                                                                        value=<%=target['target_fiducials'][0]['fiducial'][2]['entered_time'][0]
                                                                        %> >
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <hr>

                                                    <p class="lead_text">Target Information</p>
                                                    <div class="row twopanel">
                                                        <div class="col-lg-4">
                                                            <div class="form-group">
                                                                <label class="label-text">X Position</label>
                                                                <input type="number" name="target_x_position"
                                                                    class="form-control"
                                                                    placeholder="values between 0 and 800 are accepted"
                                                                    min="0" max="800"
                                                                    value=<%=target['target_data'][0]['x_position'][0]
                                                                    %> >
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-4">
                                                            <div class="form-group">
                                                                <label class="label-text">Y Position</label>
                                                                <input type="number" name="target_y_position"
                                                                    class="form-control"
                                                                    placeholder="values between 0 and 800 are accepted"
                                                                    min="0" max="800"
                                                                    value=<%=target['target_data'][0]['y_position'][0]
                                                                    %> >
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-4">
                                                            <div class="form-group">
                                                                <label class="label-text">Z Position</label>
                                                                <input type="number" name="target_z_position"
                                                                    class="form-control"
                                                                    placeholder="values between 0 and 800 are accepted"
                                                                    min="0" max="800"
                                                                    value=<%=target['target_data'][0]['z_position'][0]
                                                                    %> >
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row twopanel">
                                                        <div class="col-lg-6">
                                                            <div class="form-group">
                                                                <label class="label-text">Experiment Date</label>
                                                                <input class="form-control" type="date"
                                                                    id="targetinfo_experiment_date"
                                                                    name="targetinfo_experiment_date" min="2012-01-01"
                                                                    max="2040-12-31"
                                                                    value=<%=target['target_data'][0]['entered_date'][0]
                                                                    %> >
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-6">
                                                            <div class="form-group">
                                                                <label class="label-text">Experiment Time</label>
                                                                <input class="form-control" type="time"
                                                                    id="targetinfo_experiment_time"
                                                                    name="targetinfo_experiment_time"
                                                                    value=<%=target['target_data'][0]['entered_time'][0]
                                                                    %> >
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="targetComments">Comments Related to the Target
                                                            Experiment</label>
                                                        <textarea class="form-control" id="targetComments"
                                                            name="target_comments"
                                                            placeholder="maximum 100 characters are accepted" rows="2"
                                                            minlength="0" maxlength="100"
                                                            value=<%=target['target_data'][0]['comments'][0]
                                                            %> ></textarea>
                                                    </div>
                                                    <hr />
                                                    <div class="row twopanel">
                                                        <div class="col-lg-6">
                                                            <div class="form-group">
                                                                <label class="label-text"
                                                                    for="targetDeviceSelect">Device</label>
                                                                <select class="form-control" id="targetDeviceSelect"
                                                                    name="target_device">
                                                                    <option
                                                                        <%=target['target_event'][0]['device']=='Keyence'
                                                                        ? 'selected' : '' %> >Keyence</option>
                                                                    <option
                                                                        <%=target['target_event'][0]['device']=='Nanofocus'
                                                                        ? 'selected' : '' %> >Nanofocus</option>
                                                                    <option
                                                                        <%=target['target_event'][0]['device']=='Quanta'
                                                                        ? 'selected' : '' %> >Quanta</option>
                                                                    <option
                                                                        <%=target['target_event'][0]['device']=='Zeiss'
                                                                        ? 'selected' : '' %> >Zeiss</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-6">
                                                            <div class="form-group">
                                                                <label class="label-text" for="targetEventType">Event
                                                                    Type</label>
                                                                <select class="form-control" id="targetEventType"
                                                                    name="target_event_type">
                                                                    <option
                                                                        <%=target['target_event'][0]['event_type']=='XRay Measurement'
                                                                        ? 'selected' : '' %> >XRay Measurement
                                                                    </option>
                                                                    <option
                                                                        <%=target['target_event'][0]['event_type']=='XFEL Instrument Measurement'
                                                                        ? 'selected' : '' %> >XFEL Instrument
                                                                        Measurement</option>
                                                                    <option
                                                                        <%=target['target_event'][0]['event_type']=='Imaging'
                                                                        ? 'selected' : '' %> >Imaging</option>
                                                                    <option
                                                                        <%=target['target_event'][0]['event_type']=='High Resolution Imaging'
                                                                        ? 'selected' : '' %> >High Resolution
                                                                        Imaging
                                                                    </option>
                                                                    <option
                                                                        <%=target['target_event'][0]['event_type']=='Overview Imaging'
                                                                        ? 'selected' : '' %> >Overview Imaging
                                                                    </option>
                                                                    <option
                                                                        <%=target['target_event'][0]['event_type']=='Mounted'
                                                                        ? 'selected' : '' %> >Mounted</option>
                                                                    <option
                                                                        <%=target['target_event'][0]['event_type']=='Unmounted'
                                                                        ? 'selected' : '' %> >Unmounted</option>
                                                                    <option
                                                                        <%=target['target_event'][0]['event_type']=='Mounted Somewhere Else'
                                                                        ? 'selected' : '' %> >Mounted Somewhere Else
                                                                    </option>
                                                                    <option
                                                                        <%=target['target_event'][0]['event_type']=='Shot'
                                                                        ? 'selected' : '' %> >Shot</option>
                                                                    <option
                                                                        <%=target['target_event'][0]['event_type']=='Broken'
                                                                        ? 'selected' : '' %> >Broken</option>
                                                                    <option
                                                                        <%=target['target_event'][0]['event_type']=='Archived'
                                                                        ? 'selected' : '' %> >Archived</option>
                                                                    <option
                                                                        <%=target['target_event'][0]['event_type']=='Destroyed'
                                                                        ? 'selected' : '' %> >Destroyed</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row twopanel">
                                                        <div class="col-lg-6">
                                                            <div>
                                                                <label for="TargetLinkToData"
                                                                    class="form-label label-text">Link to the
                                                                    Data</label>
                                                                <input class="form-control" type="text"
                                                                    id="TargetLinkToData" name="target_link_to_data"
                                                                    value=<%=target['target_event'][0]['loaded_data'][0]
                                                                    %>>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-6">
                                                            <div>
                                                                <label for="TargetLinkToMetaData"
                                                                    class="form-label label-text">Link to the Meta
                                                                    Data</label>
                                                                <input class="form-control" type="text"
                                                                    id="TargetLinkToMetaData"
                                                                    name="target_link_to_meta_data"
                                                                    value=<%=target['target_event'][0]['text_data'][0]
                                                                    %>>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row twopanel">
                                                        <div class="col-lg-6">
                                                            <div class="form-group">
                                                                <label class="label-text">Target Event Date</label>
                                                                <input class="form-control" type="date"
                                                                    id="target_event_experiment_date"
                                                                    name="target_event_experiment_date" min="2012-01-01"
                                                                    max="2040-12-31"
                                                                    value=<%=target['target_event'][0]['event_date'][0]
                                                                    %> >
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-6">
                                                            <div class="form-group">
                                                                <label class="label-text">Target Event Time</label>
                                                                <input class="form-control" type="time"
                                                                    id="target_event_experiment_time"
                                                                    name="target_event_experiment_time"
                                                                    value=<%=target['target_event'][0]['event_time'][0]
                                                                    %> >
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="targetEventComments">Comments Related to the
                                                            Target
                                                            Event</label>
                                                        <textarea class="form-control" id="targetEventComments"
                                                            name="target_event_comments"
                                                            placeholder="Maximum 100 of characters are accepted"
                                                            rows="2" minlength="0" maxlength="200"
                                                            value=<%=target['target_event'][0]['comments'][0]
                                                            %> ></textarea>
                                                    </div>
                                                    <hr>
                                                </div>
                                            <% } %>
                                        <% }); %>
                                    </div>
                                <% }); %>
                            </div>
                        <% }); %>
                    </div>       
                </div>
                <button class="btn btn-secondary">Submit the XML Data to the Database</button>
            </form>
        </div>
    </div>
    <%- include("footer") -%>